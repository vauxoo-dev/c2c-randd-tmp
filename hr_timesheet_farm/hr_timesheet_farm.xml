<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
    <record id="hr_timesheet_farm_line_list" model="ir.ui.view">
      <field name="name">hr.timesheet.farm.line.list</field>
      <field name="model">hr.timesheet.farm.line</field>
      <field name="type">tree</field>
      <field name="arch" type="xml">
        <tree string="Timesheet Lines" editable="top">
          <field name="user_id"/>
          <field name="name"/>
          <field name="hours_regular" sum="Hours"/>
          <field name="hours_cleaning" sum="Clean"/>
          <field name="hours_overtime_25" sum="25 OT"/>
          <field name="hours_overtime_50" sum="50 OT"/>
          <field name="hours_overtime_100" sum="100 OT"/>
          <field name="hours_holiday_work" sum="Holiday Work"/>
          <field name="hours_holiday" sum="Holiday"/>
          <field name="hours_illnes" sum="Illness"/>
          <field name="hours_care" sum="Care"/>
          <field name="allowance" sum="Allow"/>
          <field name="bonus" sum="Bonus"/>
          <field name="other" sum="other"/>
          <field name="notes"/>
          <field name="work_ids"/>
          <field name="hours_detail" sum="H Detail"/>
        </tree>
      </field>
    </record>
    
      <record id="hr_timesheet_farm_line_form" model="ir.ui.view">
      <field name="name">hr.timesheet.farm.line.form</field>
      <field name="model">hr.timesheet.farm.line</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form string="Timesheet Lines">
          
          
          <group colspan="2" col="2">
          <field name="user_id"/>
          <field name="hours_regular" />
          <field name="hours_cleaning" />
          <field name="hours_overtime_25" />
          <field name="hours_overtime_50" />
          <field name="hours_overtime_100" />
          <field name="hours_holiday_work" />
          <field name="hours_detail" />
          </group>
          <group colspan="2" col="2">
          <field name="name"/>
          <field name="hours_holiday" />
          <field name="hours_illnes" />
          <field name="hours_care" />
          <field name="allowance" />
          <field name="bonus" />
          <field name="other" />
          <field name="notes"/>
          </group>
          
          <field name="work_ids" widget="one2many_list" colspan="4" nolabel="1"/>
        </form>
      </field>
    </record>


    <record id="hr_timesheet_farm_line_list_detail" model="ir.ui.view">
      <field name="name">hr.timesheet.farm.line.detail.list</field>
      <field name="model">hr.timesheet.farm.line.detail</field>
      <field name="type">tree</field>
      <field name="arch" type="xml">
        <tree string="Work Lines" editable="top">
          <field name="hours" sum="Hours"/>
          <field name="task_id"/>
          <field name="prodlot_id"/>
          <field name="location_id"/>
          <field name="resource_tractor_id"/>
          <field name="hours_tractor" sum="Hours Tractor"/>
          <field name="resource_machine_id"/>
          <field name="hours_machine" sum="Hours Machine"/>

        </tree>
      </field>
    </record>

    <record id="hr_timesheet_farm_line_detail_search" model="ir.ui.view">
      <field name="name">hr.timesheet.farm.line.detail.search</field>
      <field name="model">hr.timesheet.farm.line.detail</field>
      <field name="type">search</field>
      <field eval="3" name="priority"/>
      <field name="arch" type="xml">
        <search string="Timesheet Farm Search">
          <group col="14" colspan="4">
            <filter
              domain="[('name','&lt;=',time.strftime('%%Y-%%m-%%d 23:59:59')),('name','&gt;=',time.strftime('%%Y-%%m-%%d 00:00:00'))]"
              help="Todays work"
              icon="terp-go-today"
              name="today"
              string="Today"/>
            <filter
              domain="[('name','&lt;=',(datetime.date.today() + relativedelta(days=-1)).strftime('%%Y-%%m-%%d 23:59:59')),('name','&gt;=',(datetime.date.today() + relativedelta(days=-1)).strftime('%%Y-%%m-%%d 00:00:00'))]"
              help="Yesterdays Work"
              icon="terp-go-today"
              string="Yesterday"/>
            <filter
              domain="[('name','&lt;',(datetime.date.today() + relativedelta(months=1)).strftime('%%Y-%%m-01 00:00:00')),('name','&gt;=',time.strftime('%%Y-%%m-01 00:00:00')) ]"
              help="This month work"
              icon="terp-go-month"
              string="This Mo"/>
            <filter
              domain="[('name','&lt;',(datetime.date.today().strftime('%%Y-%%m-01 00:00:00'))) , ('name','&gt;=', ((datetime.date.today() + relativedelta(months=-1)).strftime('%%Y-%%m-01 00:00:00'))) ]"
              help="Last month work"
              icon="terp-go-month"
              string="Last Mo"/>
            <filter
              domain="[('name','&gt;=', (datetime.date.today().strftime('%%Y-'+ str((((datetime.date.today().month/4)+1)*3-2)).zfill(2) +'-01 00:00:00')))]"
              help="This Quarter work"
              icon="terp-go-month"
              string="This Qu"/>
            <filter
              domain="[('name','&lt;', (datetime.date.today().strftime('%%Y-'+ str((((datetime.date.today().month/4)+1)*3-2)).zfill(2) +'-01 00:00:00'))) ,  ('name','&gt;=', ((datetime.datetime.now() + relativedelta(months=-3)).strftime('%%Y-'+ str(((( (datetime.datetime.now() + relativedelta(months=-3)).month/4)+1)*3-2)).zfill(2) +'-01 00:00:00'))) ] "
              help="Last quarters work"
              icon="terp-go-month"
              string="Last Qu"/>
            <filter
              domain="[('name','&gt;=',time.strftime('%%Y-01-01 00:00:00')) ]"
              help="This year work"
              icon="terp-go-year"
              string="This Yr"/>
            <filter
              domain="[('name','&lt;',time.strftime('%%Y-01-01 00:00:00')) ,('name','&gt;=',(datetime.date.today() + relativedelta(years=-1)).strftime('%%Y-01-01 00:00:00')) ]"
              help="Last year work"
              icon="terp-go-year"
              string="Last Yr"/>

            <newline/>
            <field name="name"/>
            <field name="user_id">
              <filter domain="[('user_id','=',uid)]" help="My Work" icon="terp-personal" name="mywork"/>
            </field>
          </group>
          <newline/>
          <group expand="0" string="Group By..." colspan="4" col="8">
            <filter
              context="{'group_by':'user_id'}"
              domain="[]"
              icon="terp-accessories-archiver"
              name="by_user"
              string="User"/>
            <filter
              context="{'group_by':'name'}"
              domain="[]"
              icon="terp-accessories-archiver"
              name="by_name"
              string="Date"/>
          </group>
        </search>
      </field>
    </record>

    
    <record id="act_hr_timesheet_farm_line_form" model="ir.actions.act_window">
        <field name="name">Timesheet Lines Farm</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.timesheet.farm.line</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{"search_default_today":0, "search_default_mywork":0}</field>
        <field name="search_view_id" ref="hr_timesheet_farm_line_detail_search"/>
        <field name="help">Farm Through this menu you can register and follow your workings hours by project every day.</field>
    </record>

    
    <menuitem id="menu_hr_timesheet_farm_line" parent="hr_attendance.menu_hr_time_tracking" action="act_hr_timesheet_farm_line_form"/>
 
 
 
 
 
    </data>
</openerp>  
